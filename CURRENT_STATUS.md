# 現状の整理と今後の改善ポイント

## 更新日
2025-12-13（最新）

## 開発方針の重要事項

### ⚠️ Vercel確認を一旦諦めてブラッシュアップ優先
- **日常の進捗確認**: ローカルで `npm run build` が通ることを合格ラインとする
- **Vercelでの確認**: 機能がまとまった単位でのみ行う
- **理由**: 初期フェーズではプロダクトブラッシュアップを最優先し、Vercelデプロイ確認は一旦優先度を下げる

### ⚠️ 暫定許容事項（エンジニア引き継ぎ時に修正が必要）
- **DB非依存の公開ページ**: Vercelビルド成功のために、公開ページ（トップ/一覧/詳細）はDB接続失敗時にダミーデータを使用
- **migrate deployの削除**: `package.json`のbuildスクリプトから`prisma migrate deploy`を削除（DB接続不要でビルド可能にするため）
- **ダミーデータ**: `web/lib/mockData.ts`に固定のダミーコンサルタントデータを定義
- **詳細は**: `HANDOVER_FOR_ENGINEERS.md`を参照

## 現状の画面構成

### 公開画面（求職者向け）
- ✅ `/` - トップページ（Canva風デザイン、ダミーデータ対応）
- ✅ `/consultants` - コンサルタント一覧（フィルタリング機能、ダミーデータ対応）
- ✅ `/consultants/[id]` - コンサルタント詳細（ダミーデータ対応）

### 管理画面（コンサルタント/Admin向け）
- ✅ `/dashboard` - コンサルタントダッシュボード
- ✅ `/dashboard/profile` - プロフィール編集（Acting as機能、定数管理）
- ✅ `/consultant/login` - コンサルタントログイン

## 実装済みの改善点

### ✅ 完了済み
1. **公開導線から管理画面へのリンクを隠す** - 完了
2. **管理画面に「Acting as」の明示を追加** - 完了
3. **画像アップロードのエラーハンドリング強化** - 完了
4. **検索軸項目の選択式・タグ式化** - 完了（定数管理で統一）
5. **求職者向け公開画面のUX改善** - 完了（Canva風デザイン、フィルタリング改善）
6. **フッターのリンク整理** - 完了（内部向けリンクを削除）
7. **ヘッダーナビの整理** - 完了（公開ユーザー向けナビリンクを非表示）

## 方針に沿った改善が必要な点

### 🔴 優先度：高（すぐに修正すべき）

1. **Vercel本番環境でのDB接続設定**
   - 現状: 暫定でDB非依存のダミーデータを使用
   - 対応: Neon PostgreSQLへの接続設定をVercel環境変数に追加
   - ファイル: Vercel環境変数設定、`web/.env.example`

2. **migrate deployの復元**
   - 現状: buildスクリプトから`prisma migrate deploy`を削除
   - 対応: DB接続が確立したら、buildスクリプトに`prisma migrate deploy`を復元
   - ファイル: `web/package.json`

### 🟡 優先度：中（次の機能実装時に改善）

3. **ダミーデータの削除**
   - 現状: `web/lib/mockData.ts`でダミーデータを定義
   - 対応: DB接続が確立したら、ダミーデータフォールバックを削除
   - ファイル: `web/lib/mockData.ts`, 各公開ページコンポーネント

4. **エラーハンドリングの改善**
   - 現状: DB接続失敗時はダミーデータにフォールバック
   - 対応: 適切なエラーメッセージ表示とログ記録

### 🟢 優先度：低（将来的な改善）

5. **Admin/コンサルタント本人の権限管理**
   - 現状: 簡易的なログインのみ
   - 対応: 適切な認証・権限管理の実装

## 次の実装タスク

1. **Vercel本番環境でのDB接続設定**
2. **migrate deployの復元**
3. **ダミーデータの削除**

詳細は `HANDOVER_FOR_ENGINEERS.md` を参照してください。
